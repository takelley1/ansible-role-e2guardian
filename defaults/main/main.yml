---

e2g_repo_url: https://github.com/e2guardian/e2guardian.git
e2g_repo_branch: v5.3  # v5.4 has issues right now.

e2g_install_dir: /opt/e2guardian
e2g_repo_dir: "{{ (e2g_install_dir, 'git') | path_join }}"
e2g_filter_groups_dir: "{{ (e2g_install_dir, 'etc', 'e2guardian', 'lists') | path_join }}"

# Whether to clone, configure, and build E2Guardian.
build_e2g: true
# Whether to remove E2Guardian.
uninstall_e2g: false
# Whether to remove the packages to required to build E2Guardian after installation.
remove_build_dependencies: false
# The value to use for `Storage` in /etc/systemd/journald.conf.
journald_conf_Storage: persistent
# The value to use for `RuntimeMaxUse` in /etc/systemd/journald.conf.
journald_conf_RuntimeMaxUse: 10M

# Only used if SSL man-in-the-middle is enabled for E2Guardian.
e2g_ca_name: E2Guardian CA
e2g_cert_key_size: 2048
e2g_cert_type: RSA

# Compiler options' affect on binary size (branch v5.3).
  # No CXXFLAGS                        = 28748
  # CXXFLAGS="-march=native"           = 2032
  # CXXFLAGS=                  "-pipe" = 2020
  # CXXFLAGS="-march=native -O2 -pipe" = 1468
  # CXXFLAGS=              "-O2 -pipe" = 1460
  # CXXFLAGS=              "-O2"       = 1460
# See https://wiki.gentoo.org/wiki/GCC_optimization for more info on CXXFLAGS.

build_options: >
  --quiet
  --enable-sslmitm=yes
  --enable-pcre=yes
  --enable-lfs=yes
  --prefix="{{ e2g_install_dir }}"
  --with-proxyuser="{{ e2g_conf_daemonuser }}"
  --with-proxygroup="{{ e2g_conf_daemongroup }}"
  CXXFLAGS="-march=native -O2 -pipe"
